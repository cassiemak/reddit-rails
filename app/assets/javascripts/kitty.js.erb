// var app = angular.module('app_name', arr_of_module_name)
// arr_of_module_name = ['ngRoute', 'ng-polymer-elements']

// successfully initalize angular with no extra modules. 
var app = angular.module('kitty', ['ngRoute']);

app.config(['$routeProvider',function($routeProvider) {
  $routeProvider.when('/post-list', {
    templateUrl: "<%= asset_path('post-list.html') %>",
    controller: 'PostListCtrl',
  }).
  when('/posts/:id', {
    templateUrl: "<%= asset_path('post.html') %>",
    controller: 'PostItemCtrl',
  })
}])

app.controller('PostListCtrl', ['$scope', '$http', function($scope, $http){
  var myArray = ['hello', 'kitty', 'world'];
  $scope.words = myArray;

  $http.get('/posts.json').success(function(data, status, xhr){
    $scope.posts = data.posts;
    console.log($scope.posts);
    console.log(data);
    console.log(status);
    console.log(xhr);
  });

  $scope.addNewPost = function(){

    console.log("clicked submit");

    var newPostdata = {title: $scope.newPost, url: $scope.newURL};
    $http.post('/posts', newPostdata).success(function(data, status, xhr){
    // $scope.newpost = data;
      console.log('post success!');
      $scope.posts.push(newPostdata);
      $scope.newPost ='';
      $scope.newURL = '';
    })
  }
}])

app.controller('PostItemCtrl', ['$scope', '$http', '$routeParams', function($scope, $http, $routeParams){
  console.log('HIHI');
  $http.get('/posts/'+ $routeParams.id +'.json').success(function(data, status, xhr){
    console.log('id is:', $routeParams);
    $scope.post = data;

  })
}])

app.controller('NewItemCtrl', ['$scope', '$http', function($scope, $http){
  console.log('NewItemCtrl works!')
  $http.get('/posts/new').success(function(data, status, xhr){
    $scope.newpost = data; 
  })
}])

// Jan 19, auglar cond't
// $routeProvider.when('',{}).when('',{}).when('',{})
// app.config(function($routeProvider){

// });

// app.controller('PostListCtrl', function($scope, $http){
//   // alert('hihi'); 

// });

// app.controller('PostItemCtrl', function($scope, $http, $routeParams){

// })





// app.controller('name_of_controller', function('refer to the modules if you have any'){
// })

// Naming convertion for controller -> "NameCtrl"
// app.controller('PostCtrl', function($scope){
//   $scope.brand = "coca-cola";
//   $scope.prices = [1,4,5,6,7,65];
//   $scope.sum = addition($scope.prices);


//   $scope.addPrice = function(){
//     if ($scope.priceForm.$valid && $scope.newPrice != null){
//     $scope.prices.push($scope.newPrice);
//     $scope.sum = addition($scope.prices);
//     } else {
//     alert ('form invalid!');
//     }
//     $scope.newPrice = "";
//   }


//   function addition(arr){
//     // for (var i=0; i < $scope.prices.length(); i++){
//     //   $scope.sum += $scope.prices[i];
//     // }
//     var total = 0;
//     arr.forEach(function(item){
//       total += item;
//     })
//     return total;
//   }


//   $scope.ifNumber = function(){
//     $scope.newPrice; 
//   }

// });


// app.controller('CompanyCtrl', function($scope){
//   $scope.companies = ["Apple", "Microsoft", "Google", "Alibaba", "Tencent"];
// })

